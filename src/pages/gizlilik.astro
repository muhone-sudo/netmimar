---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getReader } from "../lib/reader";
import { DocumentRenderer } from "@keystatic/core/renderer";

const reader = getReader(Astro.locals.runtime?.env?.GITHUB_TOKEN);
const settings = await reader.singletons.settings.read();

let privacyContent: any = null;
try {
    if (settings) {
        privacyContent = await settings.privacyPolicy();
    }
} catch (e) {
    console.warn("Privacy policy read warning:", e);
}
---

<BaseLayout title="Gizlilik Politikası — NetMimar">
    <section class="py-20 bg-surface">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="mb-8 text-sm text-text-muted">
                <a href="/" class="hover:text-primary transition-colors"
                    >Ana Sayfa</a
                >
                <span class="mx-2">›</span>
                <span class="text-primary">Gizlilik Politikası</span>
            </nav>

            <h1 class="text-3xl sm:text-4xl font-bold text-primary mb-8">
                Gizlilik Politikası
            </h1>

            <div class="prose prose-lg max-w-none">
                {
                    privacyContent ? (
                        <DocumentRenderer document={privacyContent} />
                    ) : (
                        <p class="text-text-muted">
                            Gizlilik politikası henüz eklenmemiş.
                        </p>
                    )
                }
            </div>
        </div>
    </section>
</BaseLayout>
